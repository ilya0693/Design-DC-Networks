# _Проектная работа_

## _Проектирование сетевой фабрики на основне VxLAN EVPN_

_Цель проекта:_ Проектирование и конфигурирование VxLAN EVPN фабрики между двумя географически распределенными ЦОД с использованием оборудования производителя Juniper.

_Задачи проекта:_
1.	Требования при проектировании ЦОД’ов.
2.	Описание архитектуры ЦОД и используемых технологий
*	Описание Underlay сети и его конфигурация в рамках одного POD’а.
*	Описание Overlay сети и его конфигурация в рамках одного POD’а.
*	Реализация VXLAN/EVPN фабрики в Junos (L2VNI и L3VNI) в рамках одного POD’а.
3.	Организация внешних подключений или стык с вышестоящим провайдером и их резервирование.
4. DCI или растягивание VLAN между несколькими ЦОД
* Обеспечение IP связности между Lo адресами оборудования разных ЦОД в Underlay
* Обеспечение связности между ЦОД в Overlay.
5. Кратко про взаимодействие с оборудованием безопасности (NGFW, криптошлюзы, etc.)
6.	Общие правила и рекомендации по эксплуатации сети (здесь описывается как назначать ASN, IP-адреса Lo интерфейсов, значение MTU, наименование оборудования, переподписка, масштабирование и т.д.)

### _Введение_

В данном проекте отражены элементы Высокоуровневого (High Level Design) и Низкоуровневого дизайна (Low Level Design) сети передачи данных Центра Обработки Данных (ЦОД). Описывается рекомендуемая архитектура и шаблоны конфигурации для построения ЦОД на базе оборудования Juniper Networks. Данный проект является попыткой создать документ, который можно было бы использовать при проектировании сети ЦОД на базе оборудования Juniper Networks, а потому, некоторые моменты могут быть упущены или не учтены.

### _1. Требования при проектировании ЦОД’ов_

Рассмотрим ситуацию, когда необходимо создать инфраструктуру ЦОД на двух площадках, находящихся в городе Москва и городе Ставрополь, а к проектированию ЦОД предъявляют следующие требования:

* Требования по использованию архитектуры фабрики коммутации с распределённой плоскостью управления;
* Требования по расположению L3-маршрутизации ЦОД на граничных маршрутизаторах;
* Соединение ЦОД через вышестоящего провайдера;
* Общие требования по отказоустойчивости решения на каждом уровне ЦОД;
* Требования к масштабированию ЦОД по количеству коммутаторов и пропускной способности;
* Требования по балансировке и оптимальному прохождению трафика в ЦОД.

### _6. Общие правила и рекомендации по эксплуатации сети_
В данном разделе описаны правила именование площадок и устройств. Также в данном разделе описано, как назначать ASN, Lo интерфейсы, MTU, VNI и т.д. Раздел создан с целью упростить понимание архитектуры и процессы эксплуатации оборудования, а также облегчить процесс поиска неполадок. 

#### _6.1. Правила обозначения площадок_
Для того, чтобы упростить понимание, на какой площадке находится ЦОД ему назначают уникальный идентификатор **_dxx_**, где **_d_** расшифровывается как Data Center, а xxx - значение от 1 до 999. В нашем случае каждой площадке присваиваются следующие номера:

* d77 - г. Москва;
* d26 - г. Ставрополь.

В данном примере значения xxx выбраны исходя из их номера региона. Используя номера регионов для обозначения площадок ЦОД можно будет, практически, не "подглядывая" в документацию, определить, в каком городе или регионе расположен ЦОД. Если же в рамках одного региона будут располагаться 2 или 3 ЦОДа, то к значению региона прибавляется +100. Например, если в Москве будут расположены 2 или 3 ЦОДа, то второму ЦОДу будет присвоен идентификатор d177, а третьему - d277.

#### _6.2. Правила именования оборудования_
Для назначения наименования устройства (hostname) предлагается использовать следующее обозначение:
{site_name}(3)-{role}(2-5)-{rack}(3)-{device_id}(2), 

где

{site_name} - дентификатор площадки, на которой установлено устройство, длина – 3 символа, используемые символы: a-z, 0-9, нижний регистр. В рамках данного проекта используются площадки с кодами d77 и d26.

{role} - идентификатор роли устройства в ЦОД, длина – 2-5 символов, используемые символы: 0-9, a-z, нижний регистр. В рамках проектной работы используются следующие
идентификаторы устройств leaf, bleaf, spine, br.

{rack} - идентификатор стойки, длина – 3 символа, используемые символы: 0-9, r, нижний регистр. Например, если устройство расположено в 5 стойке, то его номер будет r05.

{device_id} - уникальный идентификатор устройства данной роли в ЦОД.

Например, d77-leaf-r01-sw01 расшифровывается как Leaf-коммутатор с id=1 на площадке d77 (Москва) в стойке 1.

Использование данного правила значительно успростит понимание, к какому оборудованию вы подключены и в каком ЦОДе оно расположено.

#### _6.3. План адресации ЦОД_

При распределении всей адресной информации между оборудованием ЦОД предлагается ввести таблицу с числовым ID каждого из устройств. Тогда вычисление необходимых значений адресных переменных будет осуществляться следующим образом: { parameter_space } + { device_id }. Это удобно при использовании средств автоматизации при генерации шаблонов конфигурации и выполнении проверочных тестов.
